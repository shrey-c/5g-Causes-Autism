{"ast":null,"code":"import { API_BASE_URL, ACCESS_TOKEN } from \"../Constants\";\n\nconst request = options => {\n  const headers = new Headers({\n    \"Content-Type\": \"application/json\"\n  });\n\n  if (localStorage.getItem(ACCESS_TOKEN)) {\n    headers.append(\"Authorization\", \"Bearer \" + localStorage.getItem(ACCESS_TOKEN));\n  }\n\n  const defaults = {\n    headers: headers\n  };\n  options = Object.assign({}, defaults, options);\n  return fetch(options.url, options).then(response => response.json().then(json => {\n    if (!response.ok) {\n      return Promise.reject(json);\n    }\n\n    return json;\n  }));\n};\n\nexport function getCurrentUser() {\n  if (!localStorage.getItem(ACCESS_TOKEN)) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: API_BASE_URL + \"/user/me\",\n    method: \"GET\"\n  });\n}\nexport function login(loginRequest) {\n  return request({\n    url: API_BASE_URL + \"/auth/login\",\n    method: \"POST\",\n    body: JSON.stringify(loginRequest)\n  });\n}\nexport function signup(signupRequest) {\n  return request({\n    url: API_BASE_URL + \"/auth/signup\",\n    method: \"POST\",\n    body: JSON.stringify(signupRequest)\n  });\n}","map":{"version":3,"sources":["C:/Users/d970672/Documents/Bootcamp/5g-Edge-Discovery-Service/5g-edge-ui/src/util/APIUtils.js"],"names":["API_BASE_URL","ACCESS_TOKEN","request","options","headers","Headers","localStorage","getItem","append","defaults","Object","assign","fetch","url","then","response","json","ok","Promise","reject","getCurrentUser","method","login","loginRequest","body","JSON","stringify","signup","signupRequest"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,YAAvB,QAA2C,cAA3C;;AAEA,MAAMC,OAAO,GAAIC,OAAD,IAAa;AAC3B,QAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAY;AAC1B,oBAAgB;AADU,GAAZ,CAAhB;;AAIA,MAAIC,YAAY,CAACC,OAAb,CAAqBN,YAArB,CAAJ,EAAwC;AACtCG,IAAAA,OAAO,CAACI,MAAR,CACE,eADF,EAEE,YAAYF,YAAY,CAACC,OAAb,CAAqBN,YAArB,CAFd;AAID;;AAED,QAAMQ,QAAQ,GAAG;AAAEL,IAAAA,OAAO,EAAEA;AAAX,GAAjB;AACAD,EAAAA,OAAO,GAAGO,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,QAAlB,EAA4BN,OAA5B,CAAV;AAEA,SAAOS,KAAK,CAACT,OAAO,CAACU,GAAT,EAAcV,OAAd,CAAL,CAA4BW,IAA5B,CAAkCC,QAAD,IACtCA,QAAQ,CAACC,IAAT,GAAgBF,IAAhB,CAAsBE,IAAD,IAAU;AAC7B,QAAI,CAACD,QAAQ,CAACE,EAAd,EAAkB;AAChB,aAAOC,OAAO,CAACC,MAAR,CAAeH,IAAf,CAAP;AACD;;AACD,WAAOA,IAAP;AACD,GALD,CADK,CAAP;AAQD,CAvBD;;AAyBA,OAAO,SAASI,cAAT,GAA0B;AAC/B,MAAI,CAACd,YAAY,CAACC,OAAb,CAAqBN,YAArB,CAAL,EAAyC;AACvC,WAAOiB,OAAO,CAACC,MAAR,CAAe,sBAAf,CAAP;AACD;;AAED,SAAOjB,OAAO,CAAC;AACbW,IAAAA,GAAG,EAAEb,YAAY,GAAG,UADP;AAEbqB,IAAAA,MAAM,EAAE;AAFK,GAAD,CAAd;AAID;AAED,OAAO,SAASC,KAAT,CAAeC,YAAf,EAA6B;AAClC,SAAOrB,OAAO,CAAC;AACbW,IAAAA,GAAG,EAAEb,YAAY,GAAG,aADP;AAEbqB,IAAAA,MAAM,EAAE,MAFK;AAGbG,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeH,YAAf;AAHO,GAAD,CAAd;AAKD;AAED,OAAO,SAASI,MAAT,CAAgBC,aAAhB,EAA+B;AACpC,SAAO1B,OAAO,CAAC;AACbW,IAAAA,GAAG,EAAEb,YAAY,GAAG,cADP;AAEbqB,IAAAA,MAAM,EAAE,MAFK;AAGbG,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeE,aAAf;AAHO,GAAD,CAAd;AAKD","sourcesContent":["import { API_BASE_URL, ACCESS_TOKEN } from \"../Constants\";\n\nconst request = (options) => {\n  const headers = new Headers({\n    \"Content-Type\": \"application/json\",\n  });\n\n  if (localStorage.getItem(ACCESS_TOKEN)) {\n    headers.append(\n      \"Authorization\",\n      \"Bearer \" + localStorage.getItem(ACCESS_TOKEN)\n    );\n  }\n\n  const defaults = { headers: headers };\n  options = Object.assign({}, defaults, options);\n\n  return fetch(options.url, options).then((response) =>\n    response.json().then((json) => {\n      if (!response.ok) {\n        return Promise.reject(json);\n      }\n      return json;\n    })\n  );\n};\n\nexport function getCurrentUser() {\n  if (!localStorage.getItem(ACCESS_TOKEN)) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: API_BASE_URL + \"/user/me\",\n    method: \"GET\",\n  });\n}\n\nexport function login(loginRequest) {\n  return request({\n    url: API_BASE_URL + \"/auth/login\",\n    method: \"POST\",\n    body: JSON.stringify(loginRequest),\n  });\n}\n\nexport function signup(signupRequest) {\n  return request({\n    url: API_BASE_URL + \"/auth/signup\",\n    method: \"POST\",\n    body: JSON.stringify(signupRequest),\n  });\n}\n"]},"metadata":{},"sourceType":"module"}